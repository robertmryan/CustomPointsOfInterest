#  Custom Points of Interest

This provides a mechanism for multicolored intervals posted by `os_signpost`; The string generated by `os_signpost` must be in form of "Label:%d,Concept:%{public}@", where “Label” is string that will control what text appears in the interval, and “Concept” is one of the strings listed in https://help.apple.com/instruments/developer/mac/current/#/dev66257045 that dictates the color of the interval. No spaces after the commas within this string.

## Installation

To install a custom instrument so that it can be re-used at will, one should open the instrument’s project and perform “Product” » “Archive”, tap on “Distribute Content”, and then choose “Built Products”:

![distribute content](https://i.stack.imgur.com/HwbJT.png)

That builds an .instrdst package. You can then double-click on that from the macOS Finder to install it.

## Usage

This project includes a [`CustomPointsOfInterest`](Example/CustomPointsOfInterest.swift) helper that you can add to your Swift project.

```swift
let log = CustomPointsOfInterestLog(subsystem: "...")

log.interval(label: "Some process", concept: .green) {
    // do something synchronous in here
}
```

To use this tool:

 * You can then profile the app <kbd>command</kbd>-<kbd>i</kbd> or “Product” » “Profile”. 
 * Choose whatever template you want. (“Time Profiler” is often a good starting point.)
 * Tap on the `+` button in the upper right corner and search/select for “Custom Points of Interest”. If the standard “Points of Interest” tool is already included in the template, feel free to remove it.
 * Start recording.

## Removal

* In Instruments, go to “Instruments” » “Settings...” » “Packages”.
* Tap “Uninstall” button.

## License

30 November 2022

Copyright © 2022 Robert M. Ryan. All Rights Reserved.

See [License](LICENSE.md).
